{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\steam\\\\OneDrive\\\\\\u0420\\u043E\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u0456\\u043B\\\\Dev\\\\rr\\\\src\\\\App.js\";\nimport React, { useState, useMemo } from 'react';\nimport './App.css';\nimport Like from \"./img/like.svg\";\nimport Liked from \"./img/liked.svg\";\nimport Box from \"./img/box.png\";\nconst BOOKS_PAGE = '1lxN9WC-43jwJhJsC6bJYK63wCNnjOvLSgEMwzrDbkMA';\nconst API_KEY = 'AIzaSyBnsI4y-0LvVLPfxRK1Iu16h-xtxKH4KRc';\n\nfunction App() {\n  const [books, setBooks] = useState([]);\n\n  const getBooks = async () => {\n    const respons = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${BOOKS_PAGE}/values/Books!A2:D1000?majorDimension=ROWS&key=${API_KEY}`);\n    const data = await respons.json();\n    setBooks(() => {\n      return data.values.map((book, index) => {\n        return {\n          id: index + 100,\n          category: book[0],\n          image: book[1],\n          heading: book[2],\n          description: book[3]\n        };\n      });\n    });\n    setFavoritesId(localStorage.getItem('favorites'));\n  };\n\n  const fetchBooks = useMemo(() => getBooks(), []);\n  const markup = {\n    book: ({\n      id,\n      heading,\n      description,\n      image\n    }) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: (id + 100).toString(),\n        className: \"book-wrapper book-wrapper__grid\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"book-info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"book-image-wrapper\",\n        style: {\n          backgroundImage: `url(${image})`\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"h3\", {\n        className: \"book-heading\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 19\n        }\n      }, heading), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"book-description\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 19\n        }\n      }, description)), /*#__PURE__*/React.createElement(\"button\", {\n        className: favoritesBooksId.includes(id) ? \"book-to-favorite__disabled\" : \"book-to-favorite\",\n        dataId: id,\n        onClick: (() => setFavoritesId(prev => [...prev, id]), localStorage.setItem('favorites', favoritesBooksId)),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: favoritesBooksId.includes(id) ? Liked : Like,\n        className: \"book-to-favorite-img\",\n        alt: \"Add to favorite\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 22\n        }\n      }), favoritesBooksId.includes(id) ? 'Favorite!' : 'Add to favorites'));\n    },\n    favorites: ({\n      id,\n      heading,\n      image\n    }) => {\n      return /*#__PURE__*/React.createElement(\"table\", {\n        className: \"favorites-books\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        className: \"favorites-img\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"favorites-img-img\",\n        src: image,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 49\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"favorites-name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 19\n        }\n      }, heading), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"favorites-del\",\n        dataId: id,\n        onClick: () => setFavoritesId(favoritesBooksId.filter(listedId => listedId != id)),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 19\n        }\n      }, \"X\")));\n    }\n  };\n  const [favoritesBooksId, setFavoritesId] = useState([]);\n  const [filter, setFilter] = useState('all');\n  console.log(filter); // double rendering\n\n  const renderedBooks = [];\n  const renderedFav = [];\n\n  const renderFavorites = () => {\n    renderedFav.push(favoritesBooksId.map(id => books.filter(book => book.id == id).map(book => markup.favorites(book))));\n  };\n\n  renderFavorites();\n\n  const renderBooks = books => {\n    renderedBooks.length = 0;\n\n    if (filter === 'all') {\n      books.forEach(book => {\n        renderedBooks.push(markup.book(book));\n      });\n    }\n\n    if (filter === 'adventure') {\n      books.filter(book => book.category === 'adventure').forEach(book => {\n        renderedBooks.push(markup.book(book));\n      });\n    }\n\n    if (filter === 'detective') {\n      books.filter(book => book.category === 'detective').forEach(book => {\n        renderedBooks.push(markup.book(book));\n      });\n    }\n\n    if (filter === 'roman') {\n      books.filter(book => book.category === 'roman').forEach(book => {\n        renderedBooks.push(markup.book(book));\n      });\n    }\n  };\n\n  document.body.addEventListener('click', event => {\n    if (event.path.includes(document.querySelector('.favorites'))) {\n      event.preventDefault();\n      return false;\n    }\n\n    document.querySelector('.favorites-info').classList.remove('favorites-info__visible');\n  }); // const renderFavorites = () => {\n  //    const favoritesBooks = JSON.parse(localStorage.favoritesBooks || '[]')\n  //    document.getElementsByClassName('.favorites').innerHTML = markup.favorites(favoritesBooks)\n  // }\n\n  renderBooks(books);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"filters\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 16\n    }\n  }, \"Choose what you love\"), /*#__PURE__*/React.createElement(\"select\", {\n    className: \"filter\",\n    onChange: e => {\n      setFilter(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"all\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 19\n    }\n  }, \"All that we love\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"adventure\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 19\n    }\n  }, \"Adventures\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"detective\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 19\n    }\n  }, \"Detectives\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"roman\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 19\n    }\n  }, \"Romans\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"favorites\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"heart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"favorites-icon-wrapper\",\n    onClick: () => {\n      document.querySelector('.favorites-info').classList.toggle('favorites-info__visible');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"count\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 19\n    }\n  }, favoritesBooksId.length || 0), /*#__PURE__*/React.createElement(\"img\", {\n    className: \"favorites-icon\",\n    src: Box,\n    alt: \"Favorites\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"favorites-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"favorites-books\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"favorites-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 28\n    }\n  }, \"Photo\"), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"favorites-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 28\n    }\n  }, \"Book title\"), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"favorites-del-header\",\n    onClick: () => setFavoritesId([]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 28\n    }\n  }, \"Clear\"))), renderedFav)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"books-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 10\n    }\n  }, renderedBooks));\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/steam/OneDrive/Робочий стіл/Dev/rr/src/App.js"],"names":["React","useState","useMemo","Box","BOOKS_PAGE","API_KEY","App","books","setBooks","getBooks","respons","fetch","data","json","values","map","book","index","id","category","image","heading","description","setFavoritesId","localStorage","getItem","fetchBooks","markup","toString","backgroundImage","favoritesBooksId","includes","prev","setItem","Liked","Like","favorites","filter","listedId","setFilter","console","log","renderedBooks","renderedFav","renderFavorites","push","renderBooks","length","forEach","document","body","addEventListener","event","path","querySelector","preventDefault","classList","remove","e","target","value","toggle"],"mappings":"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","sourcesContent":["import React, { useState, useMemo } from 'react';\nimport './App.css';\nimport Like from \"./img/like.svg\";\nimport Liked from \"./img/liked.svg\";\nimport Box from \"./img/box.png\"\n\n\nconst BOOKS_PAGE = '1lxN9WC-43jwJhJsC6bJYK63wCNnjOvLSgEMwzrDbkMA'\nconst API_KEY = 'AIzaSyBnsI4y-0LvVLPfxRK1Iu16h-xtxKH4KRc'\n\n\nfunction App() {\n   const [books, setBooks] = useState([])\n   const getBooks = async () => {\n      const respons = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${BOOKS_PAGE}/values/Books!A2:D1000?majorDimension=ROWS&key=${API_KEY}`)\n      const data = await respons.json()\n      setBooks(()=>{return data.values.map((book, index)=>{\n         return {\n            id: index + 100,\n            category: book[0],\n            image: book[1],\n            heading: book[2],\n            description: book[3],\n         }\n      })})\n      setFavoritesId(localStorage.getItem('favorites'))\n   }\n   const fetchBooks = useMemo(() => getBooks(), []);\n\n   const markup = {\n      book: ({id, heading, description, image}) => {\n         return (\n            <div key={(id+100).toString()} className=\"book-wrapper book-wrapper__grid\">\n               <div className=\"book-info\">\n                  <div className=\"book-image-wrapper\" style={{backgroundImage: `url(${image})`}}>\n                  </div>\n                  <h3 className=\"book-heading\">\n                     {heading}\n                  </h3>\n                  <div className=\"book-description\">\n                     {description}\n                  </div>\n               </div>\n               <button className={favoritesBooksId.includes(id) ? \"book-to-favorite__disabled\": \"book-to-favorite\"} dataId={id} \n                  onClick={() => setFavoritesId(prev => [...prev, id]),\n                     localStorage.setItem('favorites', favoritesBooksId)\n                  }> \n                     <img src={favoritesBooksId.includes(id) ? Liked : Like} className=\"book-to-favorite-img\" alt=\"Add to favorite\"/>\n                     {favoritesBooksId.includes(id) ? 'Favorite!' : 'Add to favorites'}\n               </button>\n            </div>\n         )\n      },\n      favorites: ({id, heading, image}) => {\n         return(\n            <table className=\"favorites-books\">\n               <tr>\n                  <td className=\"favorites-img\"><img className=\"favorites-img-img\" src={image}/></td>\n                  <td className=\"favorites-name\">{heading}</td>\n                  <td className=\"favorites-del\" dataId={id} onClick={() => \n                  setFavoritesId(\n                     favoritesBooksId.filter(listedId => listedId != id),\n                     )}\n                     >X</td>\n               </tr>\n            </table>\n         )\n      }\n   } \n   \n   const [favoritesBooksId, setFavoritesId] = useState([])\n   const [filter, setFilter] = useState('all')\n   console.log(filter) // double rendering\n\n   const renderedBooks = []\n\n   const renderedFav = []\n   const renderFavorites = () =>{\n     renderedFav.push(favoritesBooksId.map(id => books.filter(book => book.id == id).map(book => markup.favorites(book))))\n   }\n   renderFavorites()\n   \n   const renderBooks = (books) => {\n      renderedBooks.length = 0\n      if (filter === 'all'){\n         books.forEach((book) => {\n            renderedBooks.push(markup.book(book))\n         })\n      }\n      if (filter === 'adventure'){\n         books.filter(book => book.category === 'adventure').forEach((book) => {\n            renderedBooks.push(markup.book(book))\n         })\n      }\n      if (filter === 'detective'){\n        books.filter(book => book.category === 'detective').forEach((book) => {\n            renderedBooks.push(markup.book(book))\n         })\n      }\n      if (filter === 'roman'){\n         books.filter(book => book.category === 'roman').forEach((book) => {\n            renderedBooks.push(markup.book(book))\n         })\n      }\n   }\n\n   document.body.addEventListener('click', (event) => {\n      if (event.path.includes(document.querySelector('.favorites'))) {\n         event.preventDefault();\n         return false;\n      }\n       document.querySelector('.favorites-info').classList.remove('favorites-info__visible')\n    })\n\n   // const renderFavorites = () => {\n   //    const favoritesBooks = JSON.parse(localStorage.favoritesBooks || '[]')\n   //    document.getElementsByClassName('.favorites').innerHTML = markup.favorites(favoritesBooks)\n   // }\n   \n   renderBooks(books)\n\n  return(\n     \n      <div>\n         <div className=\"header\">\n            <div className=\"filters\">\n               <p>Choose what you love</p>\n               <select className=\"filter\" onChange={(e) => {setFilter(e.target.value)}}>\n                  <option value=\"all\">All that we love</option>\n                  <option value=\"adventure\">Adventures</option>\n                  <option value=\"detective\">Detectives</option>\n                  <option value=\"roman\">Romans</option>\n               </select>\n            </div>\n            <div className=\"favorites\">\n               <div className=\"heart\">\n                  <div className=\"favorites-icon-wrapper\" onClick={() => {\n                     document.querySelector('.favorites-info').classList.toggle('favorites-info__visible')\n                  }}>\n                  <div className=\"count\">{favoritesBooksId.length || 0}</div>  \n                  <img className=\"favorites-icon\" src={Box} alt=\"Favorites\" />\n               </div>\n                  <div className=\"favorites-info\">\n                  <table className=\"favorites-books\">\n                        <tr>\n                           <td className=\"favorites-img\">Photo</td>\n                           <td className=\"favorites-name\">Book title</td>\n                           <td className=\"favorites-del-header\" onClick={() => setFavoritesId([])}>Clear</td>\n                        </tr>\n               </table>\n                  {renderedFav} \n                  </div>\n               </div>\n            </div>\n         </div>\n         <div className=\"books-list\">\n            {renderedBooks}\n         </div>\n      </div> \n   )\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}