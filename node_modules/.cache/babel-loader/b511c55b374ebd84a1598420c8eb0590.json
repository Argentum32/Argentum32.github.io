{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\steam\\\\OneDrive\\\\\\u0420\\u043E\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u0456\\u043B\\\\Dev\\\\rr\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:\\\\Users\\\\steam\\\\OneDrive\\\\\\u0420\\u043E\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u0456\\u043B\\\\Dev\\\\rr\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\steam\\\\OneDrive\\\\\\u0420\\u043E\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u0456\\u043B\\\\Dev\\\\rr\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\steam\\\\OneDrive\\\\\\u0420\\u043E\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u0456\\u043B\\\\Dev\\\\rr\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useMemo}from'react';import'./App.css';import Lamp from\"./img/lamp.png\";import Like from\"./img/like.svg\";import Liked from\"./img/liked.svg\";import Box from\"./img/box.png\";import{NavLink}from'react-router-dom';var BOOKS_PAGE='1lxN9WC-43jwJhJsC6bJYK63wCNnjOvLSgEMwzrDbkMA';var API_KEY='AIzaSyBnsI4y-0LvVLPfxRK1Iu16h-xtxKH4KRc';function BooksPage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),books=_useState2[0],setBooks=_useState2[1];var _useState3=useState(JSON.parse(localStorage.getItem('favorites'))),_useState4=_slicedToArray(_useState3,2),favoritesBooksId=_useState4[0],setFavoritesId=_useState4[1];var _useState5=useState('all'),_useState6=_slicedToArray(_useState5,2),filter=_useState6[0],setFilter=_useState6[1];var renderedBooks=[];var renderedFav=[];var getBooks=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var respons,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://sheets.googleapis.com/v4/spreadsheets/\".concat(BOOKS_PAGE,\"/values/Books!A2:D1000?majorDimension=ROWS&key=\").concat(API_KEY));case 2:respons=_context.sent;_context.next=5;return respons.json();case 5:data=_context.sent;setBooks(function(){return data.values.map(function(book,index){return{id:index+100,category:book[0],image:book[1],heading:book[2],description:book[3]};});});case 7:case\"end\":return _context.stop();}}},_callee);}));return function getBooks(){return _ref.apply(this,arguments);};}();var fetchBooks=useMemo(function(){return getBooks();},[]);var markup={book:function book(_ref2){var id=_ref2.id,heading=_ref2.heading,description=_ref2.description,image=_ref2.image;return/*#__PURE__*/React.createElement(\"div\",{key:(id+100).toString(),className:\"book-wrapper book-wrapper__grid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"book-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"book-image-wrapper\",style:{backgroundImage:\"url(\".concat(image,\")\")}}),/*#__PURE__*/React.createElement(\"h3\",{className:\"book-heading\"},heading),/*#__PURE__*/React.createElement(\"div\",{className:\"book-description\"},description)),/*#__PURE__*/React.createElement(\"button\",{className:favoritesBooksId.includes(id)?\"book-to-favorite__disabled\":\"book-to-favorite\",dataId:id,onClick:function onClick(){return setFavoritesId(function(prev){return[].concat(_toConsumableArray(prev),[id]);});}},/*#__PURE__*/React.createElement(\"img\",{src:favoritesBooksId.includes(id)?Liked:Like,className:\"book-to-favorite-img\",alt:\"Add to favorite\"}),favoritesBooksId.includes(id)?'Favorite!':'Add to favorites'));},favorites:function favorites(_ref3){var id=_ref3.id,heading=_ref3.heading,image=_ref3.image;return/*#__PURE__*/React.createElement(\"table\",{className:\"favorites-books\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{className:\"favorites-img\"},/*#__PURE__*/React.createElement(\"img\",{className:\"favorites-img-img\",src:image})),/*#__PURE__*/React.createElement(\"td\",{className:\"favorites-name\"},heading),/*#__PURE__*/React.createElement(\"td\",{className:\"favorites-del\",dataId:id,onClick:function onClick(){return setFavoritesId(favoritesBooksId.filter(function(listedId){return listedId!=id;}));}},\"X\")));}};var renderBooks=function renderBooks(books){renderedBooks.length=0;if(filter==='all'){books.forEach(function(book){renderedBooks.push(markup.book(book));});}else{books.filter(function(book){return book.category===filter;}).forEach(function(book){renderedBooks.push(markup.book(book));});}};renderBooks(books);var shownBooks=[];var _useState7=useState(20),_useState8=_slicedToArray(_useState7,2),shownBooksInPage=_useState8[0],setShownBooksInPage=_useState8[1];var showBooks=function showBooks(){for(var i=0;i<shownBooksInPage;i++){shownBooks.push(renderedBooks[i]);}if(renderedBooks.length>shownBooksInPage){shownBooks.push(/*#__PURE__*/React.createElement(\"button\",{className:\"load-more-btn\",onClick:function onClick(){return setShownBooksInPage(shownBooksInPage+20);}},\"Load more\"));}};showBooks();var renderFavorites=function renderFavorites(){renderedFav.push(favoritesBooksId.map(function(id){return books.filter(function(book){return book.id==id;}).map(function(book){return markup.favorites(book);});}));};renderFavorites();var cachedFavorites=function cachedFavorites(){localStorage.setItem('favorites',JSON.stringify(favoritesBooksId));};var creatingCache=useMemo(function(){return cachedFavorites();},[favoritesBooksId]);document.body.addEventListener('click',function(event){if(event.path.includes(document.querySelector('.favorites'))){event.preventDefault();return false;}document.querySelector('.favorites-info').classList.remove('favorites-info__visible');});return/*#__PURE__*/React.createElement(\"div\",{className:\"books\"},/*#__PURE__*/React.createElement(\"div\",{className:\"header\"},/*#__PURE__*/React.createElement(\"div\",{className:\"header-l\"},/*#__PURE__*/React.createElement(NavLink,{to:\"/\",activeClassName:\"is-active\"},/*#__PURE__*/React.createElement(\"img\",{className:\"back-to-home-btn\",src:Lamp,alt:\"Back to home\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"filters\"},/*#__PURE__*/React.createElement(\"p\",null,\"Choose what you love\"),/*#__PURE__*/React.createElement(\"select\",{className:\"filter\",onChange:function onChange(e){setFilter(e.target.value);}},/*#__PURE__*/React.createElement(\"option\",{value:\"all\"},\"All that we love\"),/*#__PURE__*/React.createElement(\"option\",{value:\"fantasy\"},\"Fantasy\"),/*#__PURE__*/React.createElement(\"option\",{value:\"classics\"},\"Classics\"),/*#__PURE__*/React.createElement(\"option\",{value:\"teen\"},\"Teen\"),/*#__PURE__*/React.createElement(\"option\",{value:\"fiction\"},\"Fiction\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"favorites\"},/*#__PURE__*/React.createElement(\"div\",{className:\"heart\"},/*#__PURE__*/React.createElement(\"div\",{className:\"favorites-icon-wrapper\",onClick:function onClick(){document.querySelector('.favorites-info').classList.toggle('favorites-info__visible');}},/*#__PURE__*/React.createElement(\"div\",{className:\"count\"},favoritesBooksId.length||0),/*#__PURE__*/React.createElement(\"img\",{className:\"favorites-icon\",src:Box,alt:\"Favorites\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"favorites-info\"},/*#__PURE__*/React.createElement(\"table\",{className:\"favorites-books\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{className:\"favorites-img\"},\"Photo\"),/*#__PURE__*/React.createElement(\"td\",{className:\"favorites-name\"},\"Book title\"),/*#__PURE__*/React.createElement(\"td\",{className:\"favorites-del-header\",onClick:function onClick(){return setFavoritesId([]);}},\"Clear\"))),renderedFav)))),/*#__PURE__*/React.createElement(\"div\",{className:\"books-list\"},shownBooks));}export default BooksPage;","map":{"version":3,"sources":["C:/Users/steam/OneDrive/Робочий стіл/Dev/rr/src/App.js"],"names":["React","useState","useMemo","Lamp","Box","NavLink","BOOKS_PAGE","API_KEY","BooksPage","books","setBooks","JSON","parse","localStorage","getItem","favoritesBooksId","setFavoritesId","filter","setFilter","renderedBooks","renderedFav","getBooks","fetch","respons","json","data","values","map","book","index","id","category","image","heading","description","fetchBooks","markup","toString","backgroundImage","includes","prev","Liked","Like","favorites","listedId","renderBooks","length","forEach","push","shownBooks","shownBooksInPage","setShownBooksInPage","showBooks","i","renderFavorites","cachedFavorites","setItem","stringify","creatingCache","document","body","addEventListener","event","path","querySelector","preventDefault","classList","remove","e","target","value","toggle"],"mappings":"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","sourcesContent":["import React, { useState, useMemo } from 'react';\nimport './App.css';\nimport Lamp from \"./img/lamp.png\"\nimport Like from \"./img/like.svg\";\nimport Liked from \"./img/liked.svg\";\nimport Box from \"./img/box.png\";\nimport {NavLink} from 'react-router-dom';\n\n\nconst BOOKS_PAGE = '1lxN9WC-43jwJhJsC6bJYK63wCNnjOvLSgEMwzrDbkMA'\nconst API_KEY = 'AIzaSyBnsI4y-0LvVLPfxRK1Iu16h-xtxKH4KRc'\n\nfunction BooksPage() {\n   const [books, setBooks] = useState([])\n   const [favoritesBooksId, setFavoritesId] = useState(JSON.parse(localStorage.getItem('favorites')))\n   const [filter, setFilter] = useState('all')\n   const renderedBooks = []\n   const renderedFav = []\n\n   const getBooks = async () => {\n   const respons = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${BOOKS_PAGE}/values/Books!A2:D1000?majorDimension=ROWS&key=${API_KEY}`)\n   const data = await respons.json()\n   setBooks(()=>{return data.values.map((book, index)=>{\n      return {\n         id: index + 100,\n         category: book[0],\n         image: book[1],\n         heading: book[2],\n         description: book[3],\n      }\n    })})\n   }\n   const fetchBooks = useMemo(() => getBooks(), []);\n\n   const markup = {\n      book: ({id, heading, description, image}) => {\n         return (\n            <div key={(id+100).toString()} className=\"book-wrapper book-wrapper__grid\">\n               <div className=\"book-info\">\n                  <div className=\"book-image-wrapper\" style={{backgroundImage: `url(${image})`}}>\n                  </div>\n                  <h3 className=\"book-heading\">\n                     {heading}\n                  </h3>\n                  <div className=\"book-description\">\n                     {description}\n                  </div>\n               </div>\n               <button className={favoritesBooksId.includes(id) ? \"book-to-favorite__disabled\": \"book-to-favorite\"} \n               dataId={id} onClick={() => setFavoritesId(prev => [...prev, id])}> \n                  <img src={favoritesBooksId.includes(id) ? Liked : Like} className=\"book-to-favorite-img\" alt=\"Add to favorite\"/>\n                  {favoritesBooksId.includes(id) ? 'Favorite!' : 'Add to favorites'}\n               </button>\n            </div>\n         )\n      },\n      favorites: ({id, heading, image}) => {\n         return(\n            <table className=\"favorites-books\">\n               <tr>\n                  <td className=\"favorites-img\"><img className=\"favorites-img-img\" src={image}/></td>\n                  <td className=\"favorites-name\">{heading}</td>\n                  <td className=\"favorites-del\" dataId={id} onClick={() => \n                  setFavoritesId(\n                     favoritesBooksId.filter(listedId => listedId != id),\n                     )}\n                     >X</td>\n               </tr>\n            </table>\n         )\n      }\n   } \n   \n   const renderBooks = (books) => {\n      renderedBooks.length = 0\n      if (filter === 'all'){\n         books.forEach((book) => {renderedBooks.push(markup.book(book))})\n      } else {\n         books.filter(book => book.category === filter).forEach((book) => {renderedBooks.push(markup.book(book))})\n      }\n   }\n   renderBooks(books)\n\n   const shownBooks = []\n   const [shownBooksInPage, setShownBooksInPage] = useState(20)\n   const showBooks = () => {\n      for(var i=0; i<shownBooksInPage; i++){\n      shownBooks.push(renderedBooks[i])\n      }\n      if(renderedBooks.length > shownBooksInPage) {shownBooks\n         .push(<button className=\"load-more-btn\" onClick={() => setShownBooksInPage(shownBooksInPage+20)}>Load more</button>)}\n  }\n  showBooks()\n\n   const renderFavorites = () =>{renderedFav.push(favoritesBooksId.map(id => books.filter(book => book.id == id).map(book => markup.favorites(book))))}\n   renderFavorites()\n   \n   const cachedFavorites = () => {\n      localStorage.setItem('favorites', JSON.stringify(favoritesBooksId))\n   }\n   const creatingCache = useMemo(() => cachedFavorites(), [favoritesBooksId])\n\n   document.body.addEventListener('click', (event) => {\n      if (event.path.includes(document.querySelector('.favorites'))) {\n         event.preventDefault();\n         return false;\n      }\n       document.querySelector('.favorites-info').classList.remove('favorites-info__visible')\n    })\n\n   return(\n      <div className='books'>\n         <div className=\"header\">\n            <div className=\"header-l\">\n                <NavLink to=\"/\" activeClassName='is-active'>\n                <img className=\"back-to-home-btn\" src={Lamp} alt=\"Back to home\" />\n               </NavLink>\n            <div className=\"filters\">\n               <p>Choose what you love</p>\n               <select className=\"filter\" onChange={(e) => {setFilter(e.target.value)}}>\n                  <option value=\"all\">All that we love</option>\n                  <option value=\"fantasy\">Fantasy</option>\n                  <option value=\"classics\">Classics</option>\n                  <option value=\"teen\">Teen</option>\n                  <option value=\"fiction\">Fiction</option>\n               </select>\n               </div>\n            </div>\n            <div className=\"favorites\">\n               <div className=\"heart\">\n                  <div className=\"favorites-icon-wrapper\" onClick={() => {\n                     document.querySelector('.favorites-info').classList.toggle('favorites-info__visible')\n                  }}>\n                  <div className=\"count\">{favoritesBooksId.length || 0}</div>  \n                  <img className=\"favorites-icon\" src={Box} alt=\"Favorites\" />\n               </div>\n                  <div className=\"favorites-info\">\n                  <table className=\"favorites-books\">\n                        <tr>\n                           <td className=\"favorites-img\">Photo</td>\n                           <td className=\"favorites-name\">Book title</td>\n                           <td className=\"favorites-del-header\" onClick={() => setFavoritesId([])}>Clear</td>\n                        </tr>\n               </table>\n                  {renderedFav} \n                  </div>\n               </div>\n            </div>\n         </div>\n         <div className=\"books-list\">\n            {shownBooks}\n         </div>\n      </div> \n   )\n}\n\nexport default BooksPage;"]},"metadata":{},"sourceType":"module"}