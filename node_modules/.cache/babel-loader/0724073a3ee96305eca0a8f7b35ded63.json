{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\steam\\\\OneDrive\\\\\\u0420\\u043E\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u0456\\u043B\\\\Dev\\\\rr\\\\src\\\\App.js\";\nimport React, { useState, useMemo } from 'react';\nimport './App.css';\nimport Like from \"./img/like.svg\";\nimport Box from \"./img/box.png\";\nconst BOOKS_PAGE = '1lxN9WC-43jwJhJsC6bJYK63wCNnjOvLSgEMwzrDbkMA';\nconst API_KEY = 'AIzaSyBnsI4y-0LvVLPfxRK1Iu16h-xtxKH4KRc';\nconst [books, setBooks] = useState([]);\n\nconst getBooks = async () => {\n  const respons = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${BOOKS_PAGE}/values/Books!A2:D1000?majorDimension=ROWS&key=${API_KEY}`);\n  const data = await respons.json();\n  setBooks(() => {\n    return data.values.map((book, index) => {\n      return {\n        id: index + 100,\n        category: book[0],\n        image: book[1],\n        heading: book[2],\n        description: book[3]\n      };\n    });\n  });\n};\n\nconst fetchBooks = useMemo(() => getBooks(), []);\n\nfunction App() {\n  const markup = {\n    book: ({\n      id,\n      heading,\n      description,\n      image\n    }) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"book-wrapper book-wrapper__grid\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"book-info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"book-image-wrapper\",\n        style: {\n          backgroundImage: `url(${image})`\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"h3\", {\n        className: \"book-heading\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 19\n        }\n      }, heading), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"book-description\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 19\n        }\n      }, description)), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"book-to-favorite\",\n        dataId: id,\n        onClick: () => setFavoritesId(prev => [...prev, id]),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: Like,\n        className: \"book-to-favorite-img\",\n        alt: \"Add to favorite\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 19\n        }\n      }), \"Add to favorites\"));\n    },\n    favorites: ({\n      id,\n      heading,\n      image\n    }) => {\n      return /*#__PURE__*/React.createElement(\"table\", {\n        className: \"favorites-books\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        className: \"favorites-img\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"favorites-img-img\",\n        src: image,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 49\n        }\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"favorites-name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 19\n        }\n      }, heading), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"favorites-del\",\n        dataId: id,\n        onClick: () => setFavoritesId(favoritesBooksId.filter(listedId => listedId != id)),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 19\n        }\n      }, \"X\")));\n    }\n  };\n  const [favoritesBooksId, setFavoritesId] = useState([]);\n  const [filter, setFilter] = useState('all');\n  console.log(filter); // double rendering\n\n  const renderedBooks = [];\n  const renderedFav = [];\n\n  const renderFavorites = () => {\n    renderedFav.push(favoritesBooksId.map(id => books.filter(book => book.id == id).map(book => markup.favorites(book))));\n  };\n\n  renderFavorites();\n\n  const renderBooks = books => {\n    renderedBooks.length = 0;\n\n    if (filter === 'all') {\n      books.forEach(book => {\n        renderedBooks.push(markup.book(book));\n      });\n    }\n\n    if (filter === 'adventure') {\n      books.filter(book => book.category === 'adventure').forEach(book => {\n        renderedBooks.push(markup.book(book));\n      });\n    }\n\n    if (filter === 'detective') {\n      books.filter(book => book.category === 'detective').forEach(book => {\n        renderedBooks.push(markup.book(book));\n      });\n    }\n\n    if (filter === 'roman') {\n      books.filter(book => book.category === 'roman').forEach(book => {\n        renderedBooks.push(markup.book(book));\n      });\n    }\n  };\n\n  document.body.addEventListener('click', event => {\n    if (event.path.includes(document.querySelector('.favorites'))) {\n      event.preventDefault();\n      return false;\n    }\n\n    document.querySelector('.favorites-info').classList.remove('favorites-info__visible');\n  }); // const renderFavorites = () => {\n  //    const favoritesBooks = JSON.parse(localStorage.favoritesBooks || '[]')\n  //    document.getElementsByClassName('.favorites').innerHTML = markup.favorites(favoritesBooks)\n  // }\n\n  renderBooks(books);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"filters\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 16\n    }\n  }, \"Choose what you love\"), /*#__PURE__*/React.createElement(\"select\", {\n    className: \"filter\",\n    onChange: e => {\n      setFilter(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"all\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 19\n    }\n  }, \"All that we love\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"adventure\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 19\n    }\n  }, \"Adventures\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"detective\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 19\n    }\n  }, \"Detectives\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"roman\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 19\n    }\n  }, \"Romans\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"favorites\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"heart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"favorites-icon-wrapper\",\n    onClick: () => {\n      document.querySelector('.favorites-info').classList.toggle('favorites-info__visible');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"count\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 19\n    }\n  }, favoritesBooksId.length || 0), /*#__PURE__*/React.createElement(\"img\", {\n    className: \"favorites-icon\",\n    src: Box,\n    alt: \"Favorites\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"favorites-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"favorites-books\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"favorites-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 28\n    }\n  }, \"Photo\"), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"favorites-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 28\n    }\n  }, \"Book title\"), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"favorites-del-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 28\n    }\n  }, \"Del\"))), renderedFav)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"books-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 10\n    }\n  }, renderedBooks));\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/steam/OneDrive/Робочий стіл/Dev/rr/src/App.js"],"names":["React","useState","useMemo","Box","BOOKS_PAGE","API_KEY","books","setBooks","getBooks","respons","fetch","data","json","values","map","book","index","id","category","image","heading","description","fetchBooks","App","markup","backgroundImage","setFavoritesId","prev","Like","favorites","favoritesBooksId","filter","listedId","setFilter","console","log","renderedBooks","renderedFav","renderFavorites","push","renderBooks","length","forEach","document","body","addEventListener","event","path","includes","querySelector","preventDefault","classList","remove","e","target","value","toggle"],"mappings":"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","sourcesContent":["import React, { useState, useMemo } from 'react';\nimport './App.css';\nimport Like from \"./img/like.svg\";\nimport Box from \"./img/box.png\"\n\n\nconst BOOKS_PAGE = '1lxN9WC-43jwJhJsC6bJYK63wCNnjOvLSgEMwzrDbkMA'\nconst API_KEY = 'AIzaSyBnsI4y-0LvVLPfxRK1Iu16h-xtxKH4KRc'\nconst [books, setBooks] = useState([])\n   const getBooks = async () => {\n   const respons = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${BOOKS_PAGE}/values/Books!A2:D1000?majorDimension=ROWS&key=${API_KEY}`)\n   const data = await respons.json()\n   setBooks(()=>{return data.values.map((book, index)=>{\n      return {\n         id: index + 100,\n         category: book[0],\n         image: book[1],\n         heading: book[2],\n         description: book[3],\n      }\n    })})\n   }\n   const fetchBooks = useMemo(() => getBooks(), []);\n\nfunction App() {\n   \n\n   const markup = {\n      book: ({id, heading, description, image}) => {\n         return (\n            <div className=\"book-wrapper book-wrapper__grid\">\n               <div className=\"book-info\">\n                  <div className=\"book-image-wrapper\" style={{backgroundImage: `url(${image})`}}>\n                  </div>\n                  <h3 className=\"book-heading\">\n                     {heading}\n                  </h3>\n                  <div className=\"book-description\">\n                     {description}\n                  </div>\n               </div>\n               <button className=\"book-to-favorite\" dataId={id} onClick={() => setFavoritesId(prev => [...prev, id])}> \n                  <img src={Like} className=\"book-to-favorite-img\" alt=\"Add to favorite\"/>\n                  Add to favorites\n               </button>\n            </div>\n         )\n      },\n      favorites: ({id, heading, image}) => {\n         return(\n            <table className=\"favorites-books\">\n               <tr>\n                  <td className=\"favorites-img\"><img className=\"favorites-img-img\" src={image}/></td>\n                  <td className=\"favorites-name\">{heading}</td>\n                  <td className=\"favorites-del\" dataId={id} onClick={() => \n                  setFavoritesId(\n                     favoritesBooksId.filter(listedId => listedId != id),\n                     )}\n                     >X</td>\n               </tr>\n            </table>\n         )\n      }\n   } \n   \n   const [favoritesBooksId, setFavoritesId] = useState([])\n   const [filter, setFilter] = useState('all')\n   console.log(filter) // double rendering\n\n   const renderedBooks = []\n\n   const renderedFav = []\n   const renderFavorites = () =>{\n     renderedFav.push(favoritesBooksId.map(id => books.filter(book => book.id == id).map(book => markup.favorites(book))))\n   }\n   renderFavorites()\n   \n   const renderBooks = (books) => {\n      renderedBooks.length = 0\n      if (filter === 'all'){\n         books.forEach((book) => {\n            renderedBooks.push(markup.book(book))\n         })\n      }\n      if (filter === 'adventure'){\n         books.filter(book => book.category === 'adventure').forEach((book) => {\n            renderedBooks.push(markup.book(book))\n         })\n      }\n      if (filter === 'detective'){\n        books.filter(book => book.category === 'detective').forEach((book) => {\n            renderedBooks.push(markup.book(book))\n         })\n      }\n      if (filter === 'roman'){\n         books.filter(book => book.category === 'roman').forEach((book) => {\n            renderedBooks.push(markup.book(book))\n         })\n      }\n   }\n\n   document.body.addEventListener('click', (event) => {\n      if (event.path.includes(document.querySelector('.favorites'))) {\n         event.preventDefault();\n         return false;\n      }\n       document.querySelector('.favorites-info').classList.remove('favorites-info__visible')\n    })\n\n   // const renderFavorites = () => {\n   //    const favoritesBooks = JSON.parse(localStorage.favoritesBooks || '[]')\n   //    document.getElementsByClassName('.favorites').innerHTML = markup.favorites(favoritesBooks)\n   // }\n   \n   renderBooks(books)\n\n  return(\n     \n      <div>\n         <div className=\"header\">\n            <div className=\"filters\">\n               <p>Choose what you love</p>\n               <select className=\"filter\" onChange={(e) => {setFilter(e.target.value)}}>\n                  <option value=\"all\">All that we love</option>\n                  <option value=\"adventure\">Adventures</option>\n                  <option value=\"detective\">Detectives</option>\n                  <option value=\"roman\">Romans</option>\n               </select>\n            </div>\n            <div className=\"favorites\">\n               <div className=\"heart\">\n                  <div className=\"favorites-icon-wrapper\" onClick={() => {\n                     document.querySelector('.favorites-info').classList.toggle('favorites-info__visible')\n                  }}>\n                  <div className=\"count\">{favoritesBooksId.length || 0}</div>  \n                  <img className=\"favorites-icon\" src={Box} alt=\"Favorites\" />\n               </div>\n                  <div className=\"favorites-info\">\n                  <table className=\"favorites-books\">\n                        <tr>\n                           <td className=\"favorites-img\">Photo</td>\n                           <td className=\"favorites-name\">Book title</td>\n                           <td className=\"favorites-del-header\">Del</td>\n                        </tr>\n               </table>\n                  {renderedFav} \n                  </div>\n               </div>\n            </div>\n         </div>\n         <div className=\"books-list\">\n            {renderedBooks}\n         </div>\n      </div> \n   )\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}